---
title: "Week 9 - XSS (Cross-Site Scripting)"
date: 2025-06-03
categories: [study]
layout: single
author_profile: true
sidebar:
  nav: "main"
read_time: true
toc: true
toc_label: "On this page"
toc_sticky: true
---

# XSS: Cross-Site-Scripting
  > 클라이언트 측 스크립트를 악용하여 이용자의 브라우저에서 악성 코드를 실행시키는 공격 기법입니다.  

  ## XSS vs SQL Injection

  | Category       | SQL Injection                | XSS (Cross-Site Scripting)                    |
  |----------------|------------------------------|-----------------------------------------------|
  | Target         | **Server**                   | **Client (User's Browser)**                  |
  | Main Purpose   | Manipulate the server's DB   | Execute malicious script on the user's browser |
  | Victim         | Server                       | **Users (Clients using the website)**        |
  
  ## 클라이언트 스크립트란? 
  > 클라이언트 스크립트는 브라우저에서 실행되는 프로그래밍 언어를 말합니다.
      example: HTML, CSS, JavaScript

  ## 공격 방식
  > XSS는 공격자가 악성 스크립트를 웹 페이지에 삽입하고, 이를 이용자의 브라우저에서 실행되도록 유도하는 방식이고 실제 웹 사이트에서 XSS 취약점은 매우 흔히 나타납니다.

  Example:
  ```
    <script>
      alert('XSS Attack!');
    </script>
  ```
  ## 취약점 보고서에서 유의해야할 점
  > 보고서를 읽는 사람으로부터 "이 취약점이 왜 위험한 거에요"? 라는 피드백을 들었다면 잘못된 보고서를 작성했을 가능성이 있다.
  보고서에는 단순히 "어떤 취약점이 있습니다"가 아니라, 이 취약점을 시작으로 어떤 공격이 가능한지, 피해자는 어떠한 사람이 될 수 있는지, 공격 및 피해 범위 실제 위험시나리오   등 조치 방법들도 같이 설명해주어야 할것입니다.
  
# 어떻게 스크립트를 삽입할 수 있을까?
  ## 1. Stored XSS (저장형)
    > 악성 스크립트를 서버에 저장해두고, 나중에 다른 사용자가 그 데이터를 보게 만들면 공격이 실행됨 / 예를 들어 공격자는 본인이 작성한 게시물에 임의의 script문을 합께 작       성하여 post한 후 다른 사용자가 자신이 post한 게시물을 읽었을때 공격자가 삽입한 script문을 실행시키도록 하는 방식으로 공격이 이루어질 수 있다.

  ### 확인 방법:

  - 본인이 입력한 데이터가 웹 페이지에 출력이 되는지 확인한다. (Burp Suite 등으로 확인)
  - < ' " > 등의 특수문자가 필터링되는지 여부를 확인한다.
  - <script>______</script> 형태의 자바스크립트 삽입시도

  ### 자주 쓰이는 POC (Proof of Concept) 코드:
  ```
    <script>alert('XSS');</script>
  ```
  왜 alert()을 많이 사용할까?
  → 시각적으로 알기 쉽고, 보고서 작성 시 명확한 동작 증거를 보여주기 쉬움

  기타 자주 사용하는 함수:
  - prompt()
  - confirm()
  - console.log()
  
  ## 2. Reflected XSS (반사형)
  > 사용자가 요청 시 넣은 파라미터 값이 그대로 서버 응답에 반영되는 경우발생할 수 있다. 예를들어 공격자는 공격용 script를 URL에 삽입하여 평범한 link인척 다른 사용자들에      게 전달할 수 있고 만약 임의의 사용자가 그 URL을 클릭하는 경우 script가 작동되어 피해를 입을 수 있다.

  ### GET vs POST
  > 웹에서 데이터를 전송할 때는 보통 GET 또는 POST 방식이 사용됩니다. 이 두 방식은 단순히 요청 방식이 다를 뿐 아니라, XSS 공격이 가능한지 여부에도 큰 영향을 줍니다.

  #### (1) GET Method
  - 요청 데이터가 URL에 직접 노출됨
  - 사용자가 쉽게 링크를 클릭해 요청을 보낼 수 있음
  - XSS 페이로드를 URL에 삽입 가능
  Example :
  ```
  https://example.com/search?query=<script>alert('XSS Attack')</script>
  ```

  #### (2) Post Method
  - 요청 데이터가 HTTP Body에 포함됨
  - URL에는 보이지 않음
  - 사용자가 직접 폼을 제출해야 함
  - 링크로는 공격이 불가능
  Example:
  ```
    <form action="https://example.com/comment" method="POST">
      <input name="botton" value="<script>alert('XSS Attack')</script>">
      <input type="submit">
    </form>
  ```
  > 사용자가 공격자가 만든 폼에 직접 내용을 입력하고 전송까지 해야 공격이 실행되므로, 일반적인 상황에서 사용자를 속이기 어렵고 실행도 복잡합니다.
  > 이 때 웹 페이지가 POST 방식으로 데이터를 요청하고있다면 Burp Suite로 요청 method를 GET으로 바꿔 테스트해보기도 합니다.
    만약 GET 방식으로도 작동한다면?
      → 링크 기반 공격이 가능하다는 의미
      → 위험도와 악용 가능성이 훨씬 높아짐

















